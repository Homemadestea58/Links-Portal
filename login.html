<!DOCTYPE html>
<html lang="en">
<head>
	<title>Links Portal - Login</title>
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<link href="open-sans/stylesheet.css" rel="stylesheet">
	<link rel="shortcut icon" type="image/icon" href="favicon.ico">
	<script src="scripts/jquery.min.js"></script>
	<link rel="stylesheet" href="styles/bootstrap.min.css" >
	<link rel="stylesheet" href="links.css" >
	<link rel="stylesheet" href="../styles/themes.css" >
	<script src="scripts/bootstrap.min.js"></script>
	<script src="scripts/themes.js"></script>
<script>
	function addAlert(message) {
		$('#alerts').append(
		'<div class="alert alert-danger alert-dismissible fade show">' +
			'<button type="button" class="close" data-dismiss="alert">' +
            '&times;</button>' + message + '</div>');
		}
</script>

<!--[if IE ]>
<script>
alert("We detect you are using Internet Explorer. To get complete functionality, please use Firefox or Chrome.");
</script>
<![endif]-->

</head>
<body onLoad="clear();">

<h2>Welcome to the Links Portal!</h2>
<p><strong>For a guest login, please use the username 'guest'</strong></p><br>
<div id="alerts"></div>

<form>
<legend>Username:</legend>
<input class=textbox type="text" id="username" autofocus autocomplete='off' onKeyDown="if(event.keyCode==13) login();" required><br><br>
<legend>Password:</legend>
<input class=textbox type="password" id="password" onKeyDown="if(event.keyCode==13) login();"><br><br>
<label class="checkbox-container"><span class="text">Open Links in a new tab (may be blocked as popups)</span>
	<input type="checkbox" id="tabopen">
	<span class="checkmark tab"></span>
</label>
<br>
<input class="login button" type="button" onclick="login();" value='Submit'>
</form>

<script src="scripts/md5.js"></script>
<script>	

	function login(){

	var pass = document.getElementById("password");
	var openintab = document.getElementById("tabopen");
	encryptpass = md5(pass.value);
	var s = document.getElementById("username");
	username = s.value.toLowerCase();
	var users = ['homemadesteam58', 'admin', 'guest', 'hsak5g', 'pip 2019 links portal experience', 'sourlemon0', 'nick'];
	var passwords = ['454a49231691b3fd73c93857b3441162','fc5364bf9dbfa34954526becad136d4b','d41d8cd98f00b204e9800998ecf8427e', '8623dc603081464819e6776ae7edb88a', '82da33acbcdce87ecd54680578dfacd2', '05dc5822d6d891a37351c70e318d5f84', '8fe569676dca2e21fed65144d1c68428'];
	var userpass = ['homemadesteam58454a49231691b3fd73c93857b3441162' , 'adminfc5364bf9dbfa34954526becad136d4b' , 'guestd41d8cd98f00b204e9800998ecf8427e', 'hsak5g8623dc603081464819e6776ae7edb88a', 'pip 2019 links portal experience82da33acbcdce87ecd54680578dfacd2', 'sourlemon005dc5822d6d891a37351c70e318d5f84', 'nick8fe569676dca2e21fed65144d1c68428'];
	if (users.includes(username) && passwords.includes(encryptpass) && userpass.includes(username + encryptpass)) {
		localStorage.setItem("links-username", username);
		if (openintab.checked == true) {
				location= 'pages/portal.html' + '?open=newtab';
		} else {
				location= 'pages/portal.html';
		}
		console.log('Logged in successfully');
	} else {
		console.log('Login incorrect');
		addAlert('Login incorrect');}
	}

	function clear() {
		var warn = localStorage.getItem("warn");
		localStorage.setItem("username" , null);
		if (warn == 'true') {
			addAlert('Please login before accessing the Links Portal');
			localStorage.setItem("warn" , null);}
	}
</script>
</body>
</html>
